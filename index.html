<!DOCTYPE html>
<html>
    <head>
        <style>
            body {
                font-family: Arial, sans-serif;
                width: 800px;
                margin-left: auto;
                margin-right: auto;
            }

            table, th, td {
                border: 1px solid;
            }
            .best {
                background-color: lightgreen;
            }
        </style>
    </head>
    <body>
        <h1>Shadow DOM Style Sharing Performance Tests</h1>
        <h2>Test Pages</h2>
        <p>First open the page, refresh several times to populate the cache, <b>then</b> open developer tools to see values in the console. Opening developer tools first will drastically reduce performance.</p>
        <ul>
            <li><a href="inline_styles.html">Duplicated Inline Styles</a></li>
            <li><a href="link_tag.html">Duplicated Link Tags</a></li>
            <li><a href="imperative_css_modules.html">Imperative CSS Modules</a></li>
            <li><a href="declarative_css_modules_attribute.html">Declarative CSS Modules (experimental)</a></li>
        </ul>

        <h2>Performance Test Results</h2>
        <h4>Chrome 144.0.7559.110</h4>
        <table>
            <tr>
                <th>Test Name</th>
                <th>Duplicated Inline Styles</th>
                <th>Duplicated Link Tags</th>
                <th>Imperative CSS Modules</th>
                <th>Declarative CSS Modules (experimental)</th>
            </tr>
            <tr>
                <td>DOMContentLoaded</td>
                <td>299 milliseconds</td>
                <td>72 milliseconds</td>
                <td>37 milliseconds</td>
                <td class="best">24 milliseconds</td>
            </tr>
            <tr>
                <td>onload</td>
                <td>314 milliseconds</td>
                <td>86 milliseconds</td>
                <td class="best">85 milliseconds</td>
                <td>93 milliseconds</td>
            </tr>
            <tr>
                <td>FCP</td>
                <td>195 milliseconds</td>
                <td>104 milliseconds</td>
                <td>161 milliseconds</td>
                <td class="best">88 milliseconds</td>
            </tr>
            <tr>
                <td>Update Stylesheet</td>
                <td>54 milliseconds</td>
                <td>29 milliseconds</td>
                <td class="best">1 milliseconds</td>
                <td class="best">1 milliseconds</td>
            </tr>
            <tr>
                <td>Memory Footprint</td>
                <td>166mb</td>
                <td>113mb</td>
                <td>51mb</td>
                <td class="best">47mb</td>
            </tr>
        </table>

        <h4>Firefox 147.0.1 </h4>
        <table>
            <tr>
                <th>Test Name</th>
                <th>Duplicated Inline Styles</th>
                <th>Duplicated Link Tags</th>
                <th>Imperative CSS Modules</th>
                <th>Declarative CSS Modules (experimental)</th>
            </tr>
            <tr>
                <td>DOMContentLoaded</td>
                <td>169 milliseconds</td>
                <td>63 milliseconds</td>
                <td class="best">51 milliseconds</td>
                <td>N/A</td>
            </tr>
            <tr>
                <td>onload</td>
                <td>175 milliseconds</td>
                <td>77 milliseconds</td>
                <td class="best">61 milliseconds</td>
                <td>N/A</td>
            </tr>
            <tr>
                <td>FCP</td>
                <td>57 milliseconds</td>
                <td>87 milliseconds</td>
                <td class="best">43 milliseconds</td>
                <td>N/A</td>
            </tr>
            <tr>
                <td>Update Stylesheet</td>
                <td>127 milliseconds</td>
                <td>115 milliseconds</td>
                <td class="best">1 milliseconds</td>
                <td>N/A</td>
            </tr>
            <tr>
                <td>Memory Footprint</td>
                <td>423mb</td>
                <td>248mb</td>
                <td class="best">65mb</td>
                <td>N/A</td>
            </tr>
        </table>
        <h2>Notes</h2>
        <p>Performance numbers fluctuate from run to run to some degree. These represent a reasonable average on a moderately powerful machine with a stable network connection after 100 refreshes.</p>
        <p>"Memory Footprint" is the total used memory per tab in each browser's Task Manager. This varies depending on many factors and should only be considered a rough estimate.</p>
    </body>
</html>